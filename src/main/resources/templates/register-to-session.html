<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>S'inscrire</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/bootstrap.css}" href="../static/css/bootstrap.css"/>
    <!-- Mobile Specific Meta -->
</head>
<body>

<div th:replace="fragments/header :: header"></div>

        <div class="container" style="  margin-bottom: 5%; width: 50%;">
            <div class="row justify-content-sm-center">

                    <div class="card" style="width: fit-content; margin-top: 25%; align-content: center; background-color: #f0f0f0">
                        <div class="card-body">
                            <div class="text-center">
                                <h4 class="text-center"
                                    th:text="'Inscription à '+${sessiont.getActivity().getActivityName()}">
                                    Inscription à craft maga
                                </h4>
                            </div>
                            <p class="text-center"
                               th:text="'Session du '+${sessiont.getDay()}+' '+${sessiont.getStartTime().toString()}">
                                Samedi 10h
                            </p>

                            <button class="btn btn-primary" id="btn-titulaire" style="width: 100%; font-size: 16px">
                                Inscription en titulaire
                            </button>
                            <button class="btn btn-secondary" id = "btn-optionnel"
                                    style="width: 100%;margin-top: 16px;font-size: 16px">
                                Inscription en optionnel
                            </button>
                            <form th:action="@{/inscription-session}" th:method="post" id="submit_form">
                                <input type="hidden" th:name="session_id" th:id="session_id" th:value="${sessiont.id}">
                                <input type="hidden" name="inscription_type" id = "inscription_type" value="titular">
                            </form>
                        </div>
                    </div>

                    <input type="hidden" th:name="session_id" th:id="session_id" th:value="${sessiont.id}">

            </div>
        </div>
        <div class="container">
            <div class="row justify-content-md-center">
                <div class="alert alert-light" style="align-content: center; font-size: 14px">
                    Une inscription en optionnel n'est valable que pour une semaine
                </div>
            </div>
        </div>
</body>

<!-- start footer Area
<footer class="footer-area section-gap">
    <div class="container">
        <div class="row">
            <div class="col-lg-3  col-md-6 col-sm-6">
                <div class="single-footer-widget">
                    <h4>About Us</h4>
                    <p>
                        The state of Utah in the United States is home to lots of beautiful National Parks, & Bryce Canyon National Park ranks as three of the magnificent & awe inspiring.
                    </p>
                </div>
            </div>
            <div class="col-lg-4  col-md-6 col-sm-6">
                <div class="single-footer-widget">
                    <h4>Contact Us</h4>
                    <p>
                        56/8, rockybeach road, santa monica, Los angeles, California - 59620.
                    </p>
                    <p class="number">
                        012-6532-568-9746 <br>
                        012-6532-569-9748
                    </p>
                </div>
            </div>
            <div class="col-lg-5  col-md-6 col-sm-6">
                <div class="single-footer-widget">
                    <h4>Newsletter</h4>
                    <p>You can trust us. we only send  offers, not a single spam.</p>
                    <div class="d-flex flex-row" id="mc_embed_signup">


                        <form class="navbar-form" action="https://spondonit.us12.list-manage.com/subscribe/post?u=1462626880ade1ac87bd9c93a&amp;id=92a4423d01" method="get">
                            <div class="input-group add-on align-items-center d-flex">
                                <input class="form-control" name="EMAIL" placeholder="Your Email address" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Your Email address'" required="" type="email">
                                <div style="position: absolute; left: -5000px;">
                                    <input name="b_36c4fd991d266f23781ded980_aefe40901a" tabindex="-1" value="" type="text">
                                </div>
                                <div class="input-group-btn">
                                    <button class="genric-btn"><span class="lnr lnr-arrow-right"></span></button>
                                </div>
                            </div>
                            <div class="info mt-20"></div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-bottom row align-items-center">
            <p class="footer-text m-0 col-lg-6 col-md-12">Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0.
                Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
                 Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0.</p>
            <div class="col-lg-6 col-sm-12 footer-social">
                <a href="#"><i class="fa fa-facebook"></i></a>
                <a href="#"><i class="fa fa-twitter"></i></a>
                <a href="#"><i class="fa fa-dribbble"></i></a>
                <a href="#"><i class="fa fa-behance"></i></a>
            </div>
        </div>
    </div>
</footer>
End footer Area -->


<!-- Footer -->
<!-- Footer -->
<!-- Footer -->


<script th:inline="javascript">
    /*<![CDATA[*/
    var titularBtn = document.getElementById("btn-titulaire");
    var optionalBtn = document.getElementById("btn-optionnel");
    var form = document.getElementById("submit-form");
    var inscriptionType = document.getElementById("inscription_type");
    titularBtn.addEventListener("click",titular_clicked);
    optionalBtn.addEventListener("click",optional_clicked);



    function titular_clicked() {
        inscriptionType.value = 'titular';
        var xmlhttp = new XMLHttpRequest();
        var id = /*[[${sessiont.id}]]*/ '-1';
        var url = "/inscription-session-json/"+id+"?type=titular";
        xmlhttp.onreadystatechange = function (ev) {
            if (this.readyState === 4 && this.status === 200) {
                if (xmlhttp.responseText=="ok")
                {
                    var form = document.getElementById("submit_form");
                    window.alert("inscription terminée");
                    inscriptionType.value = 'titular';

                    form.submit();
                }
                else
                {
                    window.alert(xmlhttp.responseText);


                }
            }
        };
        xmlhttp.open("get",url);
        xmlhttp.send();
    }
    function optional_clicked() {
        var xmlhttp = new XMLHttpRequest();
        var id = /*[[${sessiont.id}]]*/ '-1';
        var url = "/inscription-session-json/"+id+"?type=optionnel";
        xmlhttp.onreadystatechange = function (ev) {
            if (this.readyState === 4 && this.status === 200) {
                if (xmlhttp.responseText=="ok")
                {
                    var form = document.getElementById("submit_form");
                    window.alert("inscription terminée");
                    inscriptionType.value = 'optionnel';
                    form.submit();
                }
                else
                {
                    window.alert(xmlhttp.responseText);
                }
            }
        };
        xmlhttp.open("get",url);
        xmlhttp.send();
    }
    /*]]>*/
</script>
</html>